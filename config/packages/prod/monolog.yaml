monolog:
    handlers:
        # Main app logs (JSON)
        main:
            type: rotating_file
            path: "%kernel.logs_dir%/app.log"
            level: info
            max_files: 14
            formatter: monolog.formatter.json
            channels: ["!deprecation"]

        # Breadcrumbs attached to Sentry traces
        sentry_logs:
            type: service
            id: Sentry\SentryBundle\Monolog\LogsHandler
            level: info

        # Errors pushed to Sentry
        sentry_exceptions:
            type: service
            id: Sentry\Monolog\Handler
            level: error

        # Deprecation warnings (still separate)
        deprecation:
            type: stream
            channels: [deprecation]
            path: php://stderr
            formatter: monolog.formatter.json
